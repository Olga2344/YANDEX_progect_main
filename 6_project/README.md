

Итоговое 6 модуль 

## Анализ воронок и A/B‑теста онбординга инвестиционного сервиса SollmaFin

### Описание проекта

Проект посвящён анализу поведения пользователей инвестиционного сервиса **SollmaFin** и оценке влияния нового онбординга на конверсию во второй депозит.

**Основные задачи:**

- Изучить исторические данные по событиям пользователей:
  - динамику привлечения новых пользователей;
  - воронки событий и узкие места.
- Оценить влияние уровня риска первого актива на вероятность открытия второго депозита.
- Рассчитать базовую ключевую метрику — среднюю сумму всех депозитов на пользователя.
- Проанализировать результаты **A/B‑эксперимента** по новому онбордингу:
  - сравнить воронки между тестовой и контрольной группой;
  - оценить влияние фичи на конверсию во второй депозит и монетизацию;
  - проверить статистическую значимость результатов (χ², t‑тест, бутстрап по перцентилям).

### Данные

Используются два основных датасета:

- `pa_sollmafin_hist.csv` — исторические данные:
  - события пользователей, страны, платформа, тип актива, уровень риска и др.
- `pa_sollmafin_abt.csv` — аналитическая витрина для A/B‑теста:
  - пользователи, их группа (`test` / `control`), события, суммы депозитов и атрибуты.

Данные загружаются сначала из локальной папки `datasets/`, при отсутствии — по URL(но ссылка не предусмотрена для общественного доступа).

### Стек и инструменты

- **Язык**: Python 3.9+
- **Библиотеки:**
  - `pandas`, `numpy` — работа с табличными и числовыми данными.
  - `scipy` (`chi2_contingency`, `ttest_ind`) — статистические тесты.
  - `plotly` — интерактивная визуализация воронки (Sankey‑диаграмма).
  - `matplotlib` — графики динамики и распределений.
  - `pycountry` — преобразование кодов стран в названия.
- **Среда**: Jupyter Notebook / JupyterLab / VS Code.

### Структура проекта


- `README.md` — описание проекта.
- ``Итоговое 6 модуль V.ipynb` — основной ноутбук.


**Версии и гипотезы:**

- В ноутбуке последовательно реализованы:
  - исследовательский анализ исторических данных;
  - построение классической и пошаговой воронок;
  - анализ влияния риска первого актива на второй депозит;
  - анализ выборки эксперимента и корректности сплита;
  - расчёт ключевой, барьерной и вспомогательных метрик;
  - бутстрап‑анализ 25, 50, 75 перцентилей сумм депозитов.
- Все гипотезы (по странам, платформам, типам активов, уровням риска) проверяются внутри одной тетради, дополнительных файлов‑версий нет.

### Основные шаги анализа

- **EDA исторических данных:**
  - динамика привлечения пользователей по дням/неделям/странам/платформам;
  - воронка событий от первого входа до второго депозита (классическая и step‑by‑step);
  - анализ уровня риска актива и связи с открытием второго депозита.
- **Базовые метрики монетизации:**
  - ключевая метрика — средняя сумма всех депозитов на пользователя;
  - оценка распределения сумм депозитов (ящик с усами, гистограмма).
- **Анализ эксперимента:**
  - проверка корректности распределения по группам (равномерность, отсутствие пересечений);
  - сравнение воронок контроль/тест;
  - оценка влияния риска/страны/платформы/типа актива на конверсию во второй депозит;
  - χ²‑тесты для категориальных метрик (конверсия);
  - t‑тесты для средних сумм депозитов.
- **Бутстрап‑анализ:**
  - для платящих пользователей строятся 95% доверительные интервалы разности 25, 50, 75‑го перцентилей между группами;
  - анализ изменения распределения сумм депозитов.

### Выводы по проекту

- Новый онбординг **значимо увеличивает конверсию во второй депозит** (примерно с 15% до 27% и выше), что подтверждено χ²‑тестами.
- При этом:
  - снижается средняя сумма первого депозита;
  - увеличивается частота операций и появляются пользователи с более крупными вторыми депозитами.
- Бутстрап‑анализ показывает:
  - снижение нижних и средних перцентилей (25 и 50) сумм депозитов;
  - рост верхних перцентилей (75), то есть часть пользователей стала инвестировать заметно больше.
- В среднем по всем пользователям рост суммы депозитов **не является статистически значимым** — эффект новой фичи неоднороден и сегмент‑зависим.
- **Рекомендации:**
  - сохранить новый онбординг как улучшение удержания и глубины вовлечения;
  - доработать коммуникации и офферы для более платежеспособных клиентов, чтобы не терять «тяжёлых» пользователей на первом депозите;
  - сегментировать пользователей по риску, стране и платформе и приоритизировать группы, в которых эффект положителен и значим.

### Системные требования

- **Python**: 3.9 или выше.
- **Рекомендуемые версии библиотек:**
  - `numpy==1.24.3`
  - `pandas==1.5.3`
  - `scipy>=1.10`
  - `plotly>=5.15`
  - `pycountry>=24.6`
- **ОС**: Windows / macOS / Linux.

- **Инструменты**: Jupyter Notebook
