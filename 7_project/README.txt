

Итоговое 7 модуль V


## Аналитика маркетплейса: юнит‑экономика и A/B‑тест бонуса для пользователей TikTok

### Описание проекта

Проект состоит из двух логически связанных частей:

1. Аналитика пользовательского поведения и монетизации маркетплейса:
   - обзор ключевых продуктовых и финансовых метрик;
   - анализ когорт, конверсий и окупаемости маркетинговых каналов.
2. Подготовка и анализ **A/B‑эксперимента** с бонусом на первую покупку для пользователей, привлечённых через **TikTok**:
   - оценка влияния бонуса на конверсию в покупку и выручку;
   - проверка статистической значимости эффектов.

Цель — выявить точки роста юнит‑экономики и оценить целесообразность масштабирования бонусной механики для TikTok‑трафика.

### Данные

Основной блок аналитики использует следующие таблицы:

- `pa_marketplace_users.csv` (`Users`):
  - `user_id`, `registration_date`, `age`, `gender`, `region`, `acq_channel`, `buyer_segment`, `cohort_week`, `cohort_month`.
- `pa_marketplace_events.csv` (`Events`):
  - `event_id`, `user_id`, `event_date`, `event_type`, `os`, `device`, `product_name`, `event_week`, `event_month`.
- `pa_marketplace_orders.csv` (`Orders`):
  - `order_id`, `user_id`, `order_date`, `product_name`, `quantity`, `unit_price`, `total_price`, `category_name`, `order_week`, `order_month`.
- `pa_marketplace_campaign_costs.csv` (`Campaign_costs`):
  - `acq_channel`, `spend_month`, `budget`.

Выручка маркетплейса считается как **5% от `total_price`**.

Блок A/B‑теста использует дополнительные таблицы:

- `pa_diploma_events_AB.csv`
- `pa_diploma_orders_AB.csv`
- `pa_diploma_sessions_AB.csv`
- `pa_diploma_users_AB.csv`
- `pa_diploma_AB_split_users.csv` — разметка групп (`control`, `treatment`).

Все данные загружаются по URL, при желании можно сохранить их в локальную папку `datasets/`.

### Стек и инструменты

- **Язык**: Python 3.9+
- **Библиотеки:**
  - `pandas`, `numpy` — обработка данных и расчёт метрик.
  - `matplotlib`, `seaborn` — визуализации (линейные графики, тепловые карты, гистограммы).
  - `scipy.stats` (`chi2_contingency`, `mannwhitneyu`) — статистические тесты для конверсий и выручки.
- **Среда**: Jupyter Notebook / JupyterLab / VS Code.

### Структура проекта

Рекомендуемая структура:

- `README.md` — описание проекта.
- `marketplace_analytics_and_ab_test.ipynb` (оригинальное имя: `Итоговое 7 модуль V.ipynb`) — основной ноутбук.
- `datasets/pa_marketplace_users.csv`
- `datasets/pa_marketplace_events.csv`
- `datasets/pa_marketplace_orders.csv`
- `datasets/pa_marketplace_campaign_costs.csv`
- *(опционально)* `requirements.txt`.

**Версии и гипотезы:**

Внутри ноутбука реализованы:

- обзор данных и базовые витрины;
- расчёт DAU/WAU/MAU, stickiness, ARPU, AOV;
- когортный анализ и retention по месяцам и сегментам (`buyer_segment`);
- оценка CAC, LTV, ROI и периода окупаемости по каналам привлечения;
- формулировка гипотез по сегментам, каналам и этапам воронки;
- анализ результатов A/B‑теста TikTok‑бонуса:
  - проверка корректности сплита;
  - расчёт CR, ARPU, ARPPU, AOV;
  - χ² для конверсии и U‑тест Манна–Уитни для выручки;
  - бутстрап‑оценка разницы средних чеков и выручки на пользователя.

Отдельных версий файлов под разные гипотезы нет: все проверки сведены в один ноутбук с чёткими блоками.

### Основные шаги анализа

- **Обзор ключевых метрик:**
  - DAU/WAU/MAU и количество событий/покупок по дням, неделям и месяцам;
  - stickiness по событиям и заказам;
  - ARPU по дням/неделям/месяцам;
  - распределение сумм заказов и выручки.
- **Сегментация:**
  - по полу, региону, каналу привлечения, сегменту покупателя;
  - динамика активности и покупательского поведения по сегментам.
- **Юнит‑экономика и каналы:**
  - расчёт CAC, ARPU, AOV, ROI и `payback_months` по месяцам и каналам;
  - выявление наиболее эффективных каналов (Affiliate, SEO, Google Ads) и проблемных (TikTok).
- **Когортный анализ и retention:**
  - активности и конверсии по когортам регистрации;
  - конверсия из регистрации в покупку по сегментам (`Regular`, `Medium`, `Rare`, `One_time`).
- **A/B‑тест TikTok‑бонуса:**
  - группы: `control` (без бонуса) и `treatment` (с бонусом);
  - оценка конверсии в покупку, выручки, ARPU, ARPPU, AOV;
  - χ²‑тест для конверсии и U‑тест Манна–Уитни для выручки;
  - бутстрап‑оценка разницы средних чеков и выручки на платящего пользователя.

### Выводы по проекту

- **По продукту и каналам:**
  - в первой половине года наблюдается рост выручки и числа покупателей (с пиком в мае), затем — снижение, при этом затраты на привлечение и число новых пользователей по некоторым каналам (TikTok) продолжают расти;
  - каналы **Affiliate** и **SEO** демонстрируют наилучший ROI и стабильную окупаемость;
  - **Google Ads** приносит значительную долю выручки с относительно стабильным AOV и ARPU;
  - канал **TikTok** даёт много пользователей, но характеризуется нестабильным AOV, высокой стоимостью привлечения и отрицательным ROI.
- **По A/B‑тесту бонуса для TikTok:**
  - конверсия из регистрации в покупку в тестовой группе **статистически значимо выше**, чем в контроле;
  - средняя выручка на платящего пользователя (**ARPPU**) в тесте также статистически значимо выше;
  - при этом разница по среднему чеку (**AOV**) неустойчива (доверительный интервал содержит 0), а общая средняя выручка на пользователя растёт умеренно.
- **Рекомендации:**
  - считать эксперимент успешным с точки зрения увеличения CR и ARPPU, но внедрять бонус поэтапно, отслеживая LTV и ROI с учётом стоимости бонусов;
  - доработать механику так, чтобы минимизировать риски привыкания к бонусам и каннибализации органических покупок;
  - продолжать оптимизацию TikTok‑трафика (таргетинг, креативы, ограничения по бонусу) или перераспределить часть бюджета в более эффективные каналы;
  - сфокусироваться на удержании прибыльных сегментов (`Regular`, `Medium`) и повышении их конверсии после 2–3 месяцев жизни.

### Системные требования

- **Python**: 3.9 или выше.
- **Рекомендуемые версии библиотек:**
  - `pandas>=1.5`
  - `numpy>=1.24`
  - `matplotlib>=3.5`
  - `seaborn>=0.12`
  - `scipy>=1.10`
- **ОС**: Windows / macOS / Linux.
- **Инструменты**: Jupyter Notebook /